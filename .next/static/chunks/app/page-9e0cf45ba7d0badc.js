(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1962:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(5155),o=r(2115),l=r(6127);function s(e){let{onPhotoUploaded:t}=e,[r,s]=(0,o.useState)(!1),[n,i]=(0,o.useState)(0),[d,c]=(0,o.useState)(!1),m=(0,o.useRef)(null),{showSuccess:u,showError:x,showInfo:g}=(0,l.Y)(),h=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?c(!0):"dragleave"===e.type&&c(!1)},f=async e=>{if(!e.type.startsWith("image/"))return void x("Ge\xe7ersiz Dosya T\xfcr\xfc","L\xfctfen sadece resim dosyası y\xfckleyin!");if(e.size>0xa00000)return void x("Dosya \xc7ok B\xfcy\xfck","Dosya boyutu 10MB'dan k\xfc\xe7\xfck olmalıdır!");s(!0),i(0);let r=new FormData;r.append("photo",e);try{let e=await fetch("/api/upload",{method:"POST",body:r});if(e.ok){let r=await e.json(),a="".concat(window.location.origin,"/photo/").concat(r.id);u("Fotoğraf Başarıyla Y\xfcklendi!","Paylaşım linki kopyalandı.",8e3),navigator.clipboard.writeText(a).then(()=>{g("Link Kopyalandı","Paylaşım linki panoya kopyalandı!")}).catch(()=>{g("Link Kopyalanamadı","Manuel olarak kopyalayın: ".concat(a))}),t(),i(0)}else{let t=await e.json();x("Y\xfckleme Hatası",t.message)}}catch(e){x("Bağlantı Hatası","Y\xfckleme sırasında bir hata oluştu!")}finally{s(!1),i(0)}};return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Fotoğraf Y\xfckle"}),(0,a.jsx)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600"),onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:e=>{e.preventDefault(),e.stopPropagation(),c(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&f(e.dataTransfer.files[0])},children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-6xl text-gray-400",children:"\uD83D\uDCF7"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-2",children:"Fotoğrafınızı buraya s\xfcr\xfckleyin veya tıklayın"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"PNG, JPG, GIF (Maksimum 10MB)"})]}),(0,a.jsx)("button",{onClick:()=>{var e;null==(e=m.current)||e.click()},disabled:r,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors",children:r?"Y\xfckleniyor...":"Dosya Se\xe7"}),(0,a.jsx)("input",{ref:m,type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&f(e.target.files[0])},className:"hidden",disabled:r})]})}),r&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(n,"%")}})}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 text-center",children:["Y\xfckleniyor... ",n,"%"]})]})]})}var n=r(8125);function i(e){let{isOpen:t,onClose:r,onConfirm:l,title:s,message:i,confirmText:d="Onayla",cancelText:c="İptal",type:m="danger"}=e;if(!t)return null;let u=(()=>{switch(m){case"danger":default:return{iconColor:"text-red-400",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",icon:n.A};case"warning":return{iconColor:"text-yellow-400",confirmButton:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",icon:n.A};case"info":return{iconColor:"text-blue-400",confirmButton:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",icon:n.A}}})(),x=u.icon;return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity z-40",onClick:r}),(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,a.jsxs)("div",{className:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,a.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:(0,a.jsx)(x,{className:"h-6 w-6 ".concat(u.iconColor)})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[(0,a.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:s}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i})})]})]}),(0,a.jsxs)("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[(0,a.jsx)("button",{type:"button",className:"inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm sm:ml-3 sm:w-auto ".concat(u.confirmButton," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800"),onClick:()=>{l(),r()},children:d}),(0,a.jsx)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white dark:bg-gray-700 px-3 py-2 text-sm font-semibold text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 sm:mt-0 sm:w-auto focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:r,children:c})]})]})})})]})}function d(){let[e,t]=(0,o.useState)([]),[r,s]=(0,o.useState)(!0),[n,d]=(0,o.useState)({isOpen:!1,photoId:null}),{showSuccess:c,showError:m,showInfo:u}=(0,l.Y)();(0,o.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("/api/photos");if(e.ok){let r=await e.json();t(r.photos)}}catch(e){console.error("Fotoğraflar y\xfcklenirken hata:",e)}finally{s(!1)}},g=()=>{d({isOpen:!1,photoId:null})},h=async()=>{if(n.photoId){try{(await fetch("/api/photos/".concat(n.photoId),{method:"DELETE"})).ok?(t(e.filter(e=>e.id!==n.photoId)),c("Fotoğraf Silindi!","Fotoğraf başarıyla silindi.")):m("Silme Hatası","Fotoğraf silinirken hata oluştu!")}catch(e){m("Bağlantı Hatası","Fotoğraf silinirken hata oluştu!")}g()}};return r?(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Fotoğraflar y\xfckleniyor..."})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Y\xfcklenen Fotoğraflar"}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-6xl text-gray-400 mb-4",children:"\uD83D\uDCF8"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Hen\xfcz fotoğraf y\xfcklenmemiş. İlk fotoğrafınızı y\xfckleyin!"})]}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow ".concat(e.status?"border-gray-200 dark:border-gray-700":"border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/10"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.original_name}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("span",{children:["Boyut: ",(e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(e.size)]}),(0,a.jsxs)("span",{children:["Y\xfcklenme: ",new Date(e.uploaded_at).toLocaleString("tr-TR")]}),(0,a.jsxs)("span",{children:["G\xf6r\xfcnt\xfclenme: ",e.view_count]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200"),children:e.status?"Aktif":"G\xf6r\xfcnt\xfclendi"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{var t;return t="".concat(window.location.origin,"/photo/").concat(e.id),void navigator.clipboard.writeText(t).then(()=>{c("Link Kopyalandı!","Paylaşım linki panoya kopyalandı.")}).catch(()=>{m("Kopyalama Hatası","Link kopyalanamadı!")})},className:"px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Link Kopyala"}),(0,a.jsx)("button",{onClick:()=>{d({isOpen:!0,photoId:e.id})},className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Sil"})]})]})},e.id))})]}),(0,a.jsx)(i,{isOpen:n.isOpen,onClose:g,onConfirm:h,title:"Fotoğrafı Sil",message:"Bu fotoğrafı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.",confirmText:"Evet, Sil",cancelText:"İptal",type:"danger"})]})}function c(){let[e,t]=(0,o.useState)(0);return(0,a.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Kullanımlık Fotoğraf Y\xfckleme"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Fotoğraflarınızı g\xfcvenli bir şekilde paylaşın. Her fotoğraf sadece bir kez g\xf6r\xfcnt\xfclenebilir, sonrasında otomatik olarak silinir."})]}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)(s,{onPhotoUploaded:()=>{t(e=>e+1)}}),(0,a.jsx)(d,{},e)]})]})})}},3825:(e,t,r)=>{Promise.resolve().then(r.bind(r,1962))},6127:(e,t,r)=>{"use strict";r.d(t,{default:()=>h,Y:()=>g});var a=r(5155),o=r(2115);let l=o.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?o.createElement("title",{id:a},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),s=o.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?o.createElement("title",{id:a},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var n=r(8125);let i=o.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?o.createElement("title",{id:a},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}),d=o.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?o.createElement("title",{id:a},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}),c={success:{icon:l,bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-700",textColor:"text-green-800 dark:text-green-200",iconColor:"text-green-400 dark:text-green-500",progressColor:"bg-green-500"},error:{icon:s,bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-700",textColor:"text-red-800 dark:text-red-200",iconColor:"text-red-400 dark:text-red-500",progressColor:"bg-red-500"},warning:{icon:n.A,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-700",textColor:"text-yellow-800 dark:text-yellow-200",iconColor:"text-yellow-400 dark:text-yellow-500",progressColor:"bg-yellow-500"},info:{icon:i,bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-700",textColor:"text-blue-800 dark:text-blue-200",iconColor:"text-blue-400 dark:text-blue-500",progressColor:"bg-blue-500"}};function m(e){let{id:t,type:r,title:l,message:s,duration:n=5e3,onClose:i}=e,[m,u]=(0,o.useState)(!1),[x,g]=(0,o.useState)(100),h=c[r],f=h.icon;return(0,o.useEffect)(()=>{let e=setTimeout(()=>u(!0),100),r=setInterval(()=>{g(e=>e<=0?(clearInterval(r),0):e-100/(n/100))},100),a=setTimeout(()=>{u(!1),setTimeout(()=>i(t),300)},n);return()=>{clearTimeout(e),clearTimeout(a),clearInterval(r)}},[t,n,i]),(0,a.jsx)("div",{className:"transform transition-all duration-300 ease-in-out ".concat(m?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:(0,a.jsxs)("div",{className:"relative max-w-sm w-full ".concat(h.bgColor," border ").concat(h.borderColor," rounded-lg shadow-lg overflow-hidden"),children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gray-200 dark:bg-gray-700",children:(0,a.jsx)("div",{className:"h-full ".concat(h.progressColor," transition-all duration-100 ease-linear"),style:{width:"".concat(x,"%")}})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(f,{className:"h-6 w-6 ".concat(h.iconColor)})}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium ".concat(h.textColor),children:l}),s&&(0,a.jsx)("p",{className:"mt-1 text-sm ".concat(h.textColor," opacity-90"),children:s})]}),(0,a.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,a.jsx)("button",{onClick:()=>{u(!1),setTimeout(()=>i(t),300)},className:"inline-flex ".concat(h.textColor," hover:opacity-70 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-transparent focus:ring-current rounded-md transition-opacity"),children:(0,a.jsx)(d,{className:"h-4 w-4"})})})]})})]})})}function u(e){let{toasts:t,onClose:r}=e;return(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-3",children:t.map(e=>(0,a.jsx)(m,{...e,onClose:r},e.id))})}let x=(0,o.createContext)(void 0),g=()=>{let e=(0,o.useContext)(x);if(!e)throw Error("useToastContext must be used within a ToastProvider");return e};function h(e){let{children:t}=e,r=(()=>{let[e,t]=(0,o.useState)([]),r=(0,o.useCallback)(e=>{let r=Math.random().toString(36).substr(2,9),a={...e,id:r};return t(e=>[...e,a]),r},[]),a=(0,o.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),l=(0,o.useCallback)((e,t,a)=>r({type:"success",title:e,message:t,duration:a}),[r]),s=(0,o.useCallback)((e,t,a)=>r({type:"error",title:e,message:t,duration:a}),[r]),n=(0,o.useCallback)((e,t,a)=>r({type:"warning",title:e,message:t,duration:a}),[r]),i=(0,o.useCallback)((e,t,a)=>r({type:"info",title:e,message:t,duration:a}),[r]);return{toasts:e,addToast:r,removeToast:a,showSuccess:l,showError:s,showWarning:n,showInfo:i}})(),l={showSuccess:r.showSuccess,showError:r.showError,showWarning:r.showWarning,showInfo:r.showInfo};return(0,a.jsxs)(x.Provider,{value:l,children:[t,(0,a.jsx)(u,{toasts:r.toasts,onClose:r.removeToast})]})}},8125:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(2115);let o=a.forwardRef(function(e,t){let{title:r,titleId:o,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},l),r?a.createElement("title",{id:o},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))})}},e=>{e.O(0,[441,255,358],()=>e(e.s=3825)),_N_E=e.O()}]);